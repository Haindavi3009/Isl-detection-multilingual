<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTS Language Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .test-item {
            margin: 20px 0;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
        }
        .test-item h3 {
            margin: 0 0 10px 0;
            color: #555;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        .url-display {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            word-break: break-all;
            margin-top: 10px;
        }
        .status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîä TTS Language Test</h1>
        <p style="text-align: center; color: #666;">Click the buttons to test text-to-speech for different Indian languages</p>
        
        <div class="test-item">
            <h3>Telugu (‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å)</h3>
            <button onclick="testTTS('‡∞í‡∞ï‡∞ü‡∞ø', 'te', this)">Test Number "‡∞í‡∞ï‡∞ü‡∞ø" (One)</button>
            <button onclick="testTTS('‡∞é', 'te', this)">Test Letter "‡∞é" (A)</button>
            <button onclick="testTTS('‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç', 'te', this)">Test "‡∞®‡∞Æ‡∞∏‡±ç‡∞ï‡∞æ‡∞∞‡∞Ç" (Hello)</button>
            <div class="url-display" id="te-url"></div>
            <div class="status" id="te-status" style="display:none;"></div>
        </div>

        <div class="test-item">
            <h3>Malayalam (‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç)</h3>
            <button onclick="testTTS('‡¥í‡¥®‡µç‡¥®‡µç', 'ml', this)">Test Number "‡¥í‡¥®‡µç‡¥®‡µç" (One)</button>
            <button onclick="testTTS('‡¥é', 'ml', this)">Test Letter "‡¥é" (A)</button>
            <button onclick="testTTS('‡¥®‡¥Æ‡¥∏‡µç‡¥ï‡¥æ‡¥∞‡¥Ç', 'ml', this)">Test "‡¥®‡¥Æ‡¥∏‡µç‡¥ï‡¥æ‡¥∞‡¥Ç" (Hello)</button>
            <div class="url-display" id="ml-url"></div>
            <div class="status" id="ml-status" style="display:none;"></div>
        </div>

        <div class="test-item">
            <h3>Tamil (‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç)</h3>
            <button onclick="testTTS('‡Æí‡Æ©‡Øç‡Æ±‡ØÅ', 'ta', this)">Test Number "‡Æí‡Æ©‡Øç‡Æ±‡ØÅ" (One)</button>
            <button onclick="testTTS('‡Æè', 'ta', this)">Test Letter "‡Æè" (A)</button>
            <button onclick="testTTS('‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç', 'ta', this)">Test "‡Æµ‡Æ£‡Æï‡Øç‡Æï‡ÆÆ‡Øç" (Hello)</button>
            <div class="url-display" id="ta-url"></div>
            <div class="status" id="ta-status" style="display:none;"></div>
        </div>

        <div class="test-item">
            <h3>Hindi (‡§π‡§ø‡§Ç‡§¶‡•Ä)</h3>
            <button onclick="testTTS('‡§è‡§ï', 'hi', this)">Test Number "‡§è‡§ï" (One)</button>
            <button onclick="testTTS('‡§è', 'hi', this)">Test Letter "‡§è" (A)</button>
            <button onclick="testTTS('‡§®‡§Æ‡§∏‡•ç‡§§‡•á', 'hi', this)">Test "‡§®‡§Æ‡§∏‡•ç‡§§‡•á" (Hello)</button>
            <div class="url-display" id="hi-url"></div>
            <div class="status" id="hi-status" style="display:none;"></div>
        </div>

        <div class="test-item">
            <h3>Kannada (‡≤ï‡≤®‡≥ç‡≤®‡≤°)</h3>
            <button onclick="testTTS('‡≤í‡≤Ç‡≤¶‡≥Å', 'kn', this)">Test Number "‡≤í‡≤Ç‡≤¶‡≥Å" (One)</button>
            <button onclick="testTTS('‡≤é', 'kn', this)">Test Letter "‡≤é" (A)</button>
            <button onclick="testTTS('‡≤®‡≤Æ‡≤∏‡≥ç‡≤ï‡≤æ‡≤∞', 'kn', this)">Test "‡≤®‡≤Æ‡≤∏‡≥ç‡≤ï‡≤æ‡≤∞" (Hello)</button>
            <div class="url-display" id="kn-url"></div>
            <div class="status" id="kn-status" style="display:none;"></div>
        </div>

        <div class="test-item">
            <h3>Bengali (‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ)</h3>
            <button onclick="testTTS('‡¶è‡¶ï', 'bn', this)">Test Number "‡¶è‡¶ï" (One)</button>
            <button onclick="testTTS('‡¶è', 'bn', this)">Test Letter "‡¶è" (A)</button>
            <button onclick="testTTS('‡¶®‡¶Æ‡¶∏‡ßç‡¶ï‡¶æ‡¶∞', 'bn', this)">Test "‡¶®‡¶Æ‡¶∏‡ßç‡¶ï‡¶æ‡¶∞" (Hello)</button>
            <div class="url-display" id="bn-url"></div>
            <div class="status" id="bn-status" style="display:none;"></div>
        </div>

        <div class="test-item">
            <h3>Marathi (‡§Æ‡§∞‡§æ‡§†‡•Ä)</h3>
            <button onclick="testTTS('‡§è‡§ï', 'mr', this)">Test Number "‡§è‡§ï" (One)</button>
            <button onclick="testTTS('‡§è', 'mr', this)">Test Letter "‡§è" (A)</button>
            <button onclick="testTTS('‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞', 'mr', this)">Test "‡§®‡§Æ‡§∏‡•ç‡§ï‡§æ‡§∞" (Hello)</button>
            <div class="url-display" id="mr-url"></div>
            <div class="status" id="mr-status" style="display:none;"></div>
        </div>

        <div class="test-item">
            <h3>English</h3>
            <button onclick="testTTS('One', 'en', this)">Test "One"</button>
            <button onclick="testTTS('Hello', 'en', this)">Test "Hello"</button>
            <div class="url-display" id="en-url"></div>
            <div class="status" id="en-status" style="display:none;"></div>
        </div>
    </div>

    <script>
        function testTTS(text, lang, button) {
            console.clear();
            console.log('=== TTS Test Started ===');
            console.log('Text:', text);
            console.log('Language:', lang);
            
            const urlDisplay = document.getElementById(`${lang}-url`);
            const statusDisplay = document.getElementById(`${lang}-status`);
            
            // Build TTS URL
            const ttsUrl = `/tts?text=${encodeURIComponent(text)}&lang=${lang}`;
            urlDisplay.textContent = `URL: ${ttsUrl}`;
            console.log('TTS URL:', ttsUrl);
            
            // Show loading status
            statusDisplay.style.display = 'block';
            statusDisplay.className = 'status info';
            statusDisplay.textContent = '‚è≥ Loading audio...';
            
            // Create audio element
            const audio = new Audio();
            audio.preload = 'auto';
            
            audio.onloadstart = () => {
                console.log('Audio loading started...');
            };
            
            audio.onloadedmetadata = () => {
                console.log('Audio metadata loaded');
                console.log('Duration:', audio.duration);
            };
            
            audio.onloadeddata = () => {
                console.log('Audio data loaded successfully');
                statusDisplay.className = 'status info';
                statusDisplay.textContent = '‚ñ∂Ô∏è Playing audio...';
            };
            
            audio.onplay = () => {
                console.log('Audio playback started');
                statusDisplay.className = 'status success';
                statusDisplay.textContent = '‚úÖ Playing: ' + text;
            };
            
            audio.onended = () => {
                console.log('Audio playback ended');
                statusDisplay.className = 'status success';
                statusDisplay.textContent = '‚úÖ Completed: ' + text;
            };
            
            audio.onerror = (e) => {
                console.error('Audio error occurred');
                console.error('Error event:', e);
                console.error('Audio error object:', audio.error);
                if (audio.error) {
                    console.error('Error code:', audio.error.code);
                    console.error('Error message:', audio.error.message);
                    
                    const errorMessages = {
                        1: 'MEDIA_ERR_ABORTED - The fetching process was aborted',
                        2: 'MEDIA_ERR_NETWORK - A network error occurred',
                        3: 'MEDIA_ERR_DECODE - An error occurred while decoding',
                        4: 'MEDIA_ERR_SRC_NOT_SUPPORTED - The audio format is not supported'
                    };
                    
                    statusDisplay.className = 'status error';
                    statusDisplay.textContent = `‚ùå Error: ${errorMessages[audio.error.code] || 'Unknown error'}`;
                }
            };
            
            // Set source and load
            audio.src = ttsUrl;
            audio.load();
            
            // Attempt to play
            const playPromise = audio.play();
            
            if (playPromise !== undefined) {
                playPromise
                    .then(() => {
                        console.log('Play promise resolved - playback started');
                    })
                    .catch(err => {
                        console.error('Play promise rejected');
                        console.error('Error name:', err.name);
                        console.error('Error message:', err.message);
                        statusDisplay.className = 'status error';
                        statusDisplay.textContent = `‚ùå Playback error: ${err.message}`;
                    });
            }
            
            console.log('=== TTS Test Setup Complete ===');
        }
    </script>
</body>
</html>
